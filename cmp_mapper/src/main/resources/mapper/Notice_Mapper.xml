<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hfxt.cmp.mapper.INoticeDao">
<!-- 新增的方法写在这里 -->


<!-- 保存非空列,返回受影响的行数 -->
	<insert id="saveSelective" useGeneratedKeys="true" keyProperty="Vo.id">
		Insert Into tb_notice 
		<trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="Vo.noticeTitle != null">notice_title,</if>
            <if test="Vo.noticeContent != null">notice_content,</if>
            <if test="Vo.noticeNewstime != null">notice_newstime,</if>
            <if test="Vo.noticeFromId != null">notice_from_id,</if>
            <if test="Vo.noticeGetId != null">notice_get_id,</if>
           
		</trim>
		<trim prefix="Values (" suffix=")" suffixOverrides=",">
            <if test="Vo.noticeTitle != null">#{Vo.noticeTitle},</if>
            <if test="Vo.noticeContent != null">#{Vo.noticeContent},</if>
            <if test="Vo.noticeNewstime != null">#{Vo.noticeNewstime},</if>
            <if test="Vo.noticeFromId != null">#{Vo.noticeFromId},</if>
            <if test="Vo.noticeGetId != null">#{Vo.noticeGetId},</if>
            
		</trim>
	</insert>
    
    <!-- 根据主键删除-->
	<delete id="delete">
		Delete From tb_notice
		Where id = #{id}
	</delete>
    
    <!-- 删除所有记录,返回受影响的行数 -->
	<delete id="deleteAll">
		Delete From tb_notice
	</delete>
    
    <!-- 更新非空列,返回受影响的行数 -->
	<update id="updateSelective">
		Update tb_notice
		<trim prefix="Set" suffixOverrides=",">
            <if test="Vo.noticeTitle != null">notice_title = #{Vo.noticeTitle},</if>
            <if test="Vo.noticeContent != null">notice_content = #{Vo.noticeContent},</if>
            <if test="Vo.noticeNewstime != null">notice_newstime = #{Vo.noticeNewstime},</if>
            <if test="Vo.noticeFromId != null">notice_from_id = #{Vo.noticeFromId},</if>
            <if test="Vo.noticeGetId != null">notice_get_id = #{Vo.noticeGetId},</if>
		</trim>
		Where tb_notice.id = #{Vo.id}
	</update>
    
    <resultMap type="NoticeVo" id="RM_Default">
        <id column="Notice_id" property="id"/>
        <result column="Notice_noticeTitle" property="noticeTitle"/>
        <result column="Notice_noticeContent" property="noticeContent"/>
        <result column="Notice_noticeNewstime" property="noticeNewstime"/>
        <result column="Notice_noticeFromId" property="noticeFromId"/>
        <result column="Notice_noticeGetId" property="noticeGetId"/>
	</resultMap>
    
     <!-- ResultMap -->
	<resultMap type="NoticeVo" id="RM_getVo_Auto">
		<discriminator javaType="int" column="_chooseRM">
			<case value="0" resultMap="RM_Default" /><!-- Auto -->
		</discriminator>
	</resultMap>
    
    <!-- 根据主键查询一条记录,通过'__chooseRM'控制返回的列 -->
	<select id="getVo_Auto" resultMap="RM_getVo_Auto">
		Select
		<include refid="Sql_SelectColumns" />
		#{chooseRM} As _chooseRM
		From	tb_notice	As	tb_notice
		Where
		tb_notice.id = #{id}
	</select>
    
    <!-- 传入id,判断是否存在该记录 -->
	<select id="isExist_Auto" resultType="boolean">
		Select Count(id) > 0
		From	tb_notice	As	tb_notice
		Where
		tb_notice.id = #{id}
	</select>
    
    <!-- 查询记录数量 -->
	<select id="queryCount_Auto" resultType="Long">
		Select Count(tb_notice.id)
		From	tb_notice	As	tb_notice
        <trim prefix="Where" prefixOverrides="And | Or">
			<include refid="Sql_Where"/>
		</trim>
	</select>
    
    <resultMap type="NoticeVo" id="RM_queryVos_Auto">
        <discriminator javaType="int" column="_chooseRM">
			<case value="0" resultMap="RM_Default" /><!-- Auto -->
		</discriminator>
	</resultMap>
    
    <!-- 查询记录集合,通过'__chooseRM'控制返回的列 -->
	<select id="queryVos_Auto" resultMap="RM_queryVos_Auto">
		Select
		<include refid="Sql_SelectColumns"/>
		#{NoticeSearch.chooseRM} As _chooseRM
		From	tb_notice	As	tb_notice
        <trim prefix="Where" prefixOverrides="And | Or">
			<include refid="Sql_Where"/>
		</trim>
		<include refid="Sql_Order"/>
		Limit #{NoticeSearch.offset},#{NoticeSearch.limit}
	</select>
    

    <resultMap type="NoticeVo" id="RM_getVo_AdminView">
		<!-- <discriminator javaType="int" column="_chooseRM"> -->
        <id column="Notice_id" property="id"/>
        <result column="Notice_noticeTitle" property="noticeTitle"/>
        <result column="Notice_noticeContent" property="noticeContent"/>
        <result column="Notice_noticeNewstime" property="noticeNewstime"/>
        <result column="Notice_noticeFromId" property="noticeFromId"/>
        <result column="Notice_noticeGetId" property="noticeGetId"/>
		<!-- </discriminator> -->
	</resultMap>
    
    <!-- 根据主键查询一条记录,专供AdminView调用 -->
	<select id="getVo_AdminView" resultMap="RM_getVo_AdminView">
		Select
		<include refid="Sql_SelectColumns" />
		#{chooseRM} As _chooseRM
		From	tb_notice	As	tb_notice
		Where
		tb_notice.id = #{id}
	</select>
    
    <resultMap type="NoticeVo" id="RM_getVo_preAdminEdit">
		<!-- <discriminator javaType="int" column="_chooseRM"> -->
        <id column="Notice_id" property="id"/>
        <result column="Notice_noticeTitle" property="noticeTitle"/>
        <result column="Notice_noticeContent" property="noticeContent"/>
        <result column="Notice_noticeNewstime" property="noticeNewstime"/>
        <result column="Notice_noticeFromId" property="noticeFromId"/>
        <result column="Notice_noticeGetId" property="noticeGetId"/>
		<!-- </discriminator> -->
	</resultMap>
    
    <!-- 根据主键查询一条记录,专供preAdminEdit调用 -->
	<select id="getVo_preAdminEdit" resultMap="RM_getVo_preAdminEdit">
		Select
		<include refid="Sql_SelectColumns" />
		#{chooseRM} As _chooseRM
		From	tb_notice	As	tb_notice
		Where
		tb_notice.id = #{id}
	</select>
    
    <resultMap type="NoticeVo" id="RM_getVo_AdminEdit">
		<!-- <discriminator javaType="int" column="_chooseRM"> -->
        <id column="Notice_id" property="id"/>
        <result column="Notice_noticeTitle" property="noticeTitle"/>
        <result column="Notice_noticeContent" property="noticeContent"/>
        <result column="Notice_noticeNewstime" property="noticeNewstime"/>
        <result column="Notice_noticeFromId" property="noticeFromId"/>
        <result column="Notice_noticeGetId" property="noticeGetId"/>
		<!-- </discriminator> -->
	</resultMap>
    
    <!-- 根据主键查询一条记录,专供AdminEdit调用 -->
	<select id="getVo_AdminEdit" resultMap="RM_getVo_AdminEdit">
		Select
		<include refid="Sql_SelectColumns" />
		#{chooseRM} As _chooseRM
		From	tb_notice	As	tb_notice
		Where
		tb_notice.id = #{id}
	</select>
    
    <resultMap type="NoticeVo" id="RM_queryVos_AdminList">
		<!-- <discriminator javaType="int" column="_chooseRM"> -->
        <id column="Notice_id" property="id"/>
        <result column="Notice_noticeTitle" property="noticeTitle"/>
        <result column="Notice_noticeContent" property="noticeContent"/>
        <result column="Notice_noticeNewstime" property="noticeNewstime"/>
        <result column="Notice_noticeFromId" property="noticeFromId"/>
        <result column="Notice_noticeGetId" property="noticeGetId"/>
		<!-- </discriminator> -->
	</resultMap>
    
    <sql id="Sql_SelectColumns">
        tb_notice.id As Notice_id,
        tb_notice.notice_title As Notice_noticeTitle,
        tb_notice.notice_content As Notice_noticeContent,
        tb_notice.notice_newstime As Notice_noticeNewstime,
        tb_notice.notice_from_id As Notice_noticeFromId,
        tb_notice.notice_get_id As Notice_noticeGetId,
	</sql>
    
    <sql id="Sql_Order">
		<trim prefix="Order By ">
    		<choose>
                <when test="NoticeSearch.sort != null">
                    Notice_${NoticeSearch.sort} 
                    <if test="NoticeSearch.order != null">
                        ${NoticeSearch.order}
                    </if>
                </when>
                <otherwise>
                    Notice_id Desc
                </otherwise>
            </choose>
		</trim>
	</sql>
    
    <sql id="Sql_Where">
        <if test="NoticeSearch.eqId != null">
			<![CDATA[ And tb_notice.id = #{NoticeSearch.eqId} ]]>
		</if>
		<if test="NoticeSearch.neId != null">
			<![CDATA[ And tb_notice.id != #{NoticeSearch.neId} ]]>
		</if>
        <if test="NoticeSearch.eqNoticeTitle != null">
			<![CDATA[ And tb_notice.notice_title = #{NoticeSearch.eqNoticeTitle} ]]>
		</if>
		<if test="NoticeSearch.lkNoticeTitle != null">
			<![CDATA[ And tb_notice.notice_title Like '%${NoticeSearch.lkNoticeTitle}%' ]]>
		</if>
        <if test="NoticeSearch.eqNoticeContent != null">
			<![CDATA[ And tb_notice.notice_content = #{NoticeSearch.eqNoticeContent} ]]>
		</if>
		<if test="NoticeSearch.lkNoticeContent != null">
			<![CDATA[ And tb_notice.notice_content Like '%${NoticeSearch.lkNoticeContent}%' ]]>
		</if>
        <if test="NoticeSearch.eqNoticeNewstime != null">
			<![CDATA[ And date_format(tb_notice.notice_newstime,'%Y-%m-%d') = date_format(#{NoticeSearch.eqNoticeNewstime},'%Y-%m-%d') ]]>
		</if>
		<if test="NoticeSearch.geNoticeNewstime != null">
			<![CDATA[ And tb_notice.notice_newstime >= #{NoticeSearch.geNoticeNewstime} ]]>
		</if>
		<if test="NoticeSearch.ltNoticeNewstime != null">
			<![CDATA[ And tb_notice.notice_newstime < #{NoticeSearch.ltNoticeNewstime} ]]>
		</if>
        
        <if test="NoticeSearch.eqNoticeFromId != null">
			<![CDATA[ And tb_notice.notice_from_id = #{NoticeSearch.eqNoticeFromId} ]]>
		</if>
		<if test="NoticeSearch.neNoticeFromId != null">
			<![CDATA[ And tb_notice.notice_from_id != #{NoticeSearch.neNoticeFromId} ]]>
		</if>
        <if test="NoticeSearch.eqNoticeGetId != null">
			<![CDATA[ And tb_notice.notice_get_id = #{NoticeSearch.eqNoticeGetId} ]]>
		</if>
		<if test="NoticeSearch.neNoticeGetId != null">
			<![CDATA[ And tb_notice.notice_get_id != #{NoticeSearch.neNoticeGetId} ]]>
		</if>
    </sql>
</mapper>


